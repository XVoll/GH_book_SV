[
["intro.html", "Section 2 Introduction 2.1 Aims of the analysis 2.2 First look at the data 2.3 Accessingh the codes and data 2.4 Additional resources", " Section 2 Introduction The introductory section describes the aims of the analysis, the location of the data and how to access the codes repository to follow the tutorial. We provide main references, and discuss recent applications of the methods to other welfare indicators and other countries. 2.1 Aims of the analysis The aim of the analysis is to create a high resolution map of key development indicators. El Salvador is the case study. The data from the 2017 household survey Encuesta de Hogares de Propósitos Múltiples (EHPM) will be used to compute the three main indicators: average income poverty literacy. The maps will be produced at the segmento level @ref(fig:map_1). While the survey data are only available for 1,664 segmentos, the Bayesian geo-statistical model introduced in Chapter 5 will allow for the estimation of the three development indicators in the 12,435 segmentos. 2.2 First look at the data We plot below the number of EHPM participants per segmento. This provide us with an opportunity to introduce some basic concepts on handling data with R. In case you are not familiar with R and the R studion environment, you can go directly to the next sub-chapter @ref(data_access). Here are the step we will follow in order to map the number of EHPM survey participants per segmento: we load the required pacakge from our library: rgdal, dplyr and leaflet; with rgdal, we laod the data: segmentos shapefile , list of households per segmento; with dplyr, we count the number of households per segmento and identify the segmentos where there is at least 1 survey participant; with leaflet, we map the result with the pacakge leaflet. Let us start by loading packages and data with rgdal. # load packages library(rgdal) library(dplyr) library(leaflet) # change the directorybto where you saved the data dir_data=&quot;C:/Users/Xavier Vollenweider/Documents/Flowminder/IDB/ES_poverty_mapping/phase_II/data/&quot; # load data into R # segmentos=readOGR(paste0(dir_data, # &quot;spatial/shape/admin/STPLAN_Segmentos.shp&quot;)) # original segemento shapefile map segmentos_to_map=readOGR(paste0(dir_data, &quot;spatial/shape/admin/STPLAN_Segmentos_simplified.shp&quot;)) # segemento shapefile map which has been simplified id_segmento_2017=readxl::read_xlsx(paste0(dir_data, &quot;tables/Identificador de segmento.xlsx&quot;), sheet = 2) # households list surveyed in the EHPM per segmento We then compute the number of participants per segmento with dplyr. id_segmento_2017_df=id_segmento_2017%&gt;% # count number of household per segmento rename(SEG_ID=seg_id)%&gt;% group_by(SEG_ID)%&gt;% summarise(ehpm_2017_d=1, # 1 if there is hh in the segmento ehpm_2017_n=n()) # number n() per segmento Before merging the results with the shapefile, let us turn the identifer of segmentos in the shapefile, “SEG_ID”, into character format. This is to make sure the match between the SEG_ID stored as a character in the household list id_segmento_2017_df and the shapefile map segmentos is correct. segmentos_to_map@data=segmentos_to_map@data%&gt;% mutate(SEG_ID=as.character(SEG_ID))%&gt;% # turn SEG_ID into character format left_join(id_segmento_2017_df, # merge the household list with the shapefile data by=&quot;SEG_ID&quot;) Please be patient when running the next command: rendering the 12,435 shapes is relatively slow despite having simplified the polygons. leaflet(segmentos_to_map) %&gt;% # leaflet is used to render the map addPolygons(color = &quot;#444444&quot;, # color of the line of the border of each segmento weight = 1, # thickness of the line of the border of each segmento smoothFactor = 1, # simplifiy the shapefile in order to speed up rendering of the map on the screen opacity = 0, # opacity of the segmento border lines fillOpacity = 1, # opacity of the segmento areas fillColor = ~colorQuantile(&quot;Greens&quot;, ehpm_2017_n)(ehpm_2017_n)) # color of the segmento areas: a palette of Greens set according to the distribution of number of participants (#fig:map_1)Number of participants surveyed per segmento 2.3 Accessingh the codes and data The code are published in the GitHub repository SV_mapping. 2.4 Additional resources Two books are recommended for those willing to get more information on the INLA approach: for readers with only a minimal quantitative background: Beginner’s Guide to Spatial, Temporal, and Spatial-Temporal Ecological Data Analysis with R-Inla (Zuur, Ieno, and Saveliev 2017), for those willing to delve deeper in the methodology behind INLA: Spatial and Spatio-Temporal Bayesian Models with R-Inla (Blangiardo and Cameletti 2015). For information about the R-INLA package and main event, please refer to the [R-INLA project website] (http://www.r-inla.org/). For a good introductory book on using R, refer to https://cengel.github.io/R-intro/. For a good introductory book on using Spatial Data with R, refer to https://cengel.github.io/R-spatial/. References "]
]
